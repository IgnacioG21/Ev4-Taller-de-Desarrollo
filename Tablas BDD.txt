CREATE DATABASE EV4TDD;
USE EV4TDD;
SHOW TABLES;

CREATE TABLE USUARIOS(
	ID INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(50) NOT NULL,
    CONTRASEÑA VARCHAR(50) NOT NULL,
    ROL VARCHAR(20) NOT NULL
);

CREATE TABLE FUNCIONARIO(
	ID INT PRIMARY KEY AUTO_INCREMENT,
    RUT VARCHAR(10) NOT NULL,
    NOMBRE VARCHAR(150) NOT NULL,
    SEXO VARCHAR(15) NOT NULL,
    DIRECCION VARCHAR(150) NOT NULL,
    TELEFONO VARCHAR(15) NOT NULL,

    CONSTRAINT FK_FUNCIONARIO FOREIGN KEY(ID)
    REFERENCES USUARIOS(ID)
);

CREATE TABLE DATOS_LABORALES(
	ID_FUNCIONARIO INT PRIMARY KEY AUTO_INCREMENT,
    CARGO VARCHAR(55) NOT NULL,
    FECHA_INGRESO DATE NOT NULL,
    AREA VARCHAR(55) NOT NULL,
    DEPARTAMENTO VARCHAR(55) NOT NULL,
    
    CONSTRAINT FK_FUNCIONARIO_DATOS_LABORALES FOREIGN KEY (ID_FUNCIONARIO)
    REFERENCES FUNCIONARIO(ID)
);

CREATE TABLE CONTACTO_EMERGENCIA(
	ID_FUNCIONARIO INT PRIMARY KEY AUTO_INCREMENT,
    NOMBRE VARCHAR(150) NOT NULL,
    RELACION VARCHAR(55) NOT NULL,
    TELEFONO VARCHAR(15) NOT NULL,
    
    CONSTRAINT FK_FUNCIONARIO_CONTACTO_EMERGENCIA FOREIGN KEY(ID_FUNCIONARIO)
    REFERENCES FUNCIONARIO(ID)
);

CREATE TABLE CARGA_FAMILIAR(
	ID_FUNCIONARIO INT AUTO_INCREMENT,
    NOMBRE VARCHAR(150) NOT NULL,
    PARENTESCO VARCHAR(55) NOT NULL,
    SEXO VARCHAR(15) NOT NULL,
    RUT VARCHAR(10) NOT NULL,

    CONSTRAINT FK_FUNCIONARIO_CARGA_FAMILIAR FOREIGN KEY(ID_FUNCIONARIO)
    REFERENCES FUNCIONARIO(ID)
);

SELECT * FROM USUARIOS;
SELECT * FROM FUNCIONARIO;
SELECT * FROM DATOS_LABORALES;
SELECT * FROM CONTACTO_EMERGENCIA;
SELECT * FROM CARGA_FAMILIAR;

INSERT INTO USUARIOS(NOMBRE, CONTRASEÑA, ROL) VALUES("Funcionario", "1", "Funcionario");
INSERT INTO FUNCIONARIO(RUT, NOMBRE, SEXO, DIRECCION, TELEFONO) VALUES("21436587-9", "Funcionario1", "Masculino", "Direccion 1", "+569 8765 4321");
INSERT INTO DATOS_LABORALES(CARGO, FECHA_INGRESO, AREA, DEPARTAMENTO) VALUES("Administrador", "2022-04-15", "Administración", "Correo de Yuri");
INSERT INTO CONTACTO_EMERGENCIA(NOMBRE, RELACION, TELEFONO) VALUES("Contacto1", "Relacion", "+569 4567 8234");
INSERT INTO CARGA_FAMILIAR(NOMBRE, PARENTESCO, SEXO, RUT) VALUES("Carga", "Parentesco", "Masculino", "65437890-1");

INSERT INTO USUARIOS(NOMBRE, CONTRASEÑA, ROL) VALUES("FuncionarioRRHH", "1", "FuncionarioRRHH");
INSERT INTO FUNCIONARIO(RUT, NOMBRE, SEXO, DIRECCION, TELEFONO) VALUES("12345678-9", "Funcionario1", "Masculino", "Avenida Libertador O'Higgins 1234, Santiago", "+569 1234 5678");
INSERT INTO DATOS_LABORALES(CARGO, FECHA_INGRESO, AREA, DEPARTAMENTO) VALUES("Gerente de Recursos Humanos", "2022-01-15", "Recursos Humanos", "Departamento de Recursos Humanos");
INSERT INTO CONTACTO_EMERGENCIA(NOMBRE, RELACION, TELEFONO) VALUES("Ana María Rodríguez", "Madre", "+569 1234 8765");
INSERT INTO CARGA_FAMILIAR(NOMBRE, PARENTESCO, SEXO, RUT) VALUES("Laura Isabel Martínez", "Hermana", "Femenino", "34567890-1");


